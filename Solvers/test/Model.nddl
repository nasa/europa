#include "../../NDDL/core/Plasma.nddl"

enum Letters {X, Y, Z};

class A extends Timeline {
 predicate predicateA{
  int arg1;
  float arg2;
 }

 predicate predicateB{
  bool arg3;
  bool arg4;
 }
}

class B extends A {
 predicate predicateC{
  Letters arg5;
 }
}

class C extends B {
 predicate predicateA{}
 predicate predicateC{}
}

class D extends A {
 predicate predicateA{}

 predicate predicateC{
  int arg6;
  int arg7;
  int arg8;
 }

 predicate predicateF{}
}

class E extends D{
 predicate predicateC{}
}


class NoPredicates {
}

class PredicateRoot extends Timeline {
 predicate predicateD{}
 predicate predicateE{}
}

class PredicateDerived extends PredicateRoot {}

D::predicateF{
 any(E.predicateC);
 any(D.predicateC);
 any(B.predicateB);
}

class Container extends Timeline {
 int objectVar1 = 10;
 int objectVar2 = 20;
 predicate pred1 {
  int arg1;
  int arg2;
 }

 predicate pred2 {
  int arg3;
 }
}

class DerivedContainer extends Container {
 int objectVar3;
 int objectVar4;
 predicate pred3{
  int arg4;
 }
}

Container::pred2 {
 int localArg1;
}

class HorizonFiltered extends Timeline {
 predicate predicate1{}
 predicate predicate2{}
 predicate predicate3{}
 predicate predicate4{}
 predicate predicate5{}

 predicate uberPredicate{
  bool forceRejection;
  eq(duration, 10);
  eq(forceRejection, true);
 }
}

/**
 * Subgoal lots of predicates within the temporal extent
 * of this uber predicate. Also subgoal recursively before and
 * after.
 */
HorizonFiltered::uberPredicate{
 meets(uberPredicate g0);
 eq(g0.forceRejection, forceRejection);
 met_by(uberPredicate g1);
 eq(g1.forceRejection, forceRejection);

 if(end == 50){
  if(forceRejection == true){
   eq(1, 0); // Force failure
  }
 }
}