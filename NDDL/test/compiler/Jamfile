SubDir PLASMA NDDL test compiler ;

if ! $(PLASMA_READY) {

local compiler_test = no-world.nddl ;
local hh = $(compiler_test:S=.hh) ;
local cc = $(compiler_test:S=.cc) ;
LocalDepends nddl-tests : $(hh) $(cc) ;
NddlCompiler $(hh) $(cc) : $(compiler_test) ;

ModuleObjects NddlMain.cc : NDDL ;

local model ;

for model in
	csp.0.nddl csp.1.nddl csp.2.nddl
	class-constructor.nddl   simple-rules.nddl guards.nddl
	existential.nddl         plasma-base.nddl  subclass.nddl
	simple-class.nddl constraint-test.nddl
	interval-constants.nddl  simple-predicate.nddl
	less-basic-model.nddl    foreach-exec.nddl
	gnats-2537.nddl simple-resources.nddl multi-resources.nddl
	multidot.nddl gnats_2830.nddl globals.nddl string-domain.nddl
{
  local exe = $(model:S=) ;
  NddlMain $(exe) : NddlMain.o : $(model) : NDDL ;
  RunModuleMain run-$(exe) : $(exe) : $(model:S=.xml) ;
  LocalDepends run-nddl-tests : run-$(exe) ;
}

} # PLASMA_READY
